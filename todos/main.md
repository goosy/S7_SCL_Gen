# s7-gen-scl

## TODO List

+ [ ] 参数值进行类型验证，输出时必须正确
  
  + [ ] 浮点值不能输出整数
  + [ ] 参数值必须为undefined时才不输出
  + [ ] 强制类型与设置值不一致时报警

+ [ ] 错误跟踪
  
  + [ ] `AI.item[n].input` 不存在时，出错信息不明确
  + [ ] DB 重复时，出错信息不明确
  + [ ] 非S7符号(定义或引用)进行警告，提示为SCL表达式
  + [ ] 同名符号错误提示有问题

+ [ ] 在Document生成后，按照配置顺序计算序列(难点在于S7符号连接)

+ [ ] 被复制文件应当确保换行为CRLF

+ [ ] 增加TCP轮询功能

+ [ ] SC_Poll 检查发送DB是否是0，为0则置为本块号

+ [ ] SCL 文件内容 `(** **)` 中无 symbols 指令时出错

+ [x] ~~2023-02-11 20:34~~ 在生成文件的内容中指示GCL文件摘要

+ [ ] 逐步增加其它 features 对 portal 的支持
  
  + [ ] MT 增加对 portal 的支持
  + [ ] SC 增加对 portal 的支持
  + [x] ~~2022-11-15 08:34~~ motor 增加对 portal 的支持
  + [x] ~~2022-11-15 02:33~~ AI 增加对 portal 的支持
  + [x] ~~2022-11-14 14:33~~ Alarm 增加对 portal 的支持
  + [x] ~~2022-11-09 19:57~~ CPU 增加对 portal 的支持
  + [x] ~~2022-11-09 20:30~~ portal 不再解析块名

+ [x] ~~2022-12-25 22:10~~ 更改指令名称
  
  + [x] ~~2022-12-25 01:46~~ 根指令 type 名称改为 feature
  + [x] ~~2022-12-25 02:55~~ 硬件型号指令 type 改为 model
  + [x] ~~2022-12-25 22:10~~ MT 应共用 CPU 的 device_types -> devices

+ [x] ~~2022-12-23 14:53~~ 具体功能下实现对符号(含符号连接)增加强制或默认类型和注释
  
  + 不应直接修改 add_symbol,add_symbols 中的 symbol_raw，应当对关联函数传递属性
  + make_prop_symbolic API 改变，参数 options 统一增加 `default`,`force` 属性，可以额外设置符号的 type 或 comment。

+ [x] ~~2022-11-11 06:40~~ AI_Proc 中文件名后缀要改为小写，否则liunx因文件名大小写敏感而出错

+ [x] ~~2022-11-10 06:12~~ 支持多CPU，方便批量定义
  
  + [x] ~~2022-11-11 06:39~~ 在 CPU:options.output_dir 增加 {{name}} 可替变量

+ [x] ~~2022-11-10 02:01~~ cli 增加 wacth 命令，以动态生成最新SCL

+ [x] ~~2022-11-08 19:54~~ 增加 nodemon 监控生成

+ [x] ~~2022-11-08 18:25~~ SC_Poll 检查接收数据CRC是否按分界地址，不要分界

+ [x] ~~2022-11-07 20:05~~ 采用yaml来标记内置符号

+ [x] ~~2022-11-07 18:07~~ CPU指令增加 calls list of OB FC
